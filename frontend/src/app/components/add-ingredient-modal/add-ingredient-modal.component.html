<!-- Add Ingredient Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="onCloseModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
        <h3>Add New Ingredient</h3>
        <button class="modal-close" (click)="onCloseModal()">Ã—</button>
    </div>
    
    <div class="modal-body">
        <p class="modal-description">
        "{{ ingredientName }}" was not found in our database. 
        Please provide nutritional information to add it.
        </p>
        
        <form (ngSubmit)="onSubmitNewIngredient()">
        <div class="form-group">
            <label for="modalIngredientName">Ingredient Name</label>
            <input
            id="modalIngredientName"
            type="text"
            class="form-control"
            [(ngModel)]="newIngredientData.name"
            name="modalName"
            readonly>
        </div>
        
        <div class="nutrition-inputs">
            <div class="form-group">
            <label for="modalProtein">Protein (g)</label>
            <input
                id="modalProtein"
                type="number"
                step="0.1"
                min="0"
                class="form-control"
                [(ngModel)]="newIngredientData.protein"
                name="modalProtein"
                placeholder="0.0">
            </div>
            
            <div class="form-group">
            <label for="modalCarbs">Carbs (g)</label>
            <input
                id="modalCarbs"
                type="number"
                step="0.1"
                min="0"
                class="form-control"
                [(ngModel)]="newIngredientData.carbs"
                name="modalCarbs"
                placeholder="0.0">
            </div>
            
            <div class="form-group">
            <label for="modalFat">Fat (g)</label>
            <input
                id="modalFat"
                type="number"
                step="0.1"
                min="0"
                class="form-control"
                [(ngModel)]="newIngredientData.fat"
                name="modalFat"
                placeholder="0.0">
            </div>
        </div>
        </form>
    </div>
    
    <div class="modal-footer">
        <button 
        class="btn btn-secondary" 
        (click)="onCloseModal()"
        [disabled]="isSubmittingNewIngredient">
        Cancel
        </button>
        <button 
        class="btn btn-primary" 
        (click)="onSubmitNewIngredient()"
        [disabled]="isSubmittingNewIngredient || !isIngredientDataValid()">
        {{ isSubmittingNewIngredient ? 'Adding...' : 'Add Ingredient' }}
        </button>
    </div>
    </div>
</div>